---
layout: post
title: How to fix "Install Parse Failed - Inconsistent Certificates" when installing
  .APK file
date: '2013-09-29T22:38:00.003-07:00'
author: Gert Lombard
tags:
- adb
- Android
modified_time: '2013-09-29T22:38:49.316-07:00'
thumbnail: http://2.bp.blogspot.com/-DK968h5SnwM/UkkNlDk3BoI/AAAAAAAACsE/cgVr_i_0j5I/s72-c/Screenshot_2013-09-29-20-24-22.png
blogger_id: tag:blogger.com,1999:blog-1583243090910089198.post-2615058014386442467
blogger_orig_url: http://www.lombard.me/2013/09/how-to-fix-install-parse-failed.html
---

If you install an Android application (.apk file) to your phone from one machine, and then try to install it again later when it's built on another machine with a different apk signature (e.g. from a CI build) then you will get the following message on the phone: &nbsp;(In this example I've tried to install the app from an email attachment directly on the phone.)<br /><div></div><br /><a href="http://2.bp.blogspot.com/-DK968h5SnwM/UkkNlDk3BoI/AAAAAAAACsE/cgVr_i_0j5I/s1600/Screenshot_2013-09-29-20-24-22.png" imageanchor="1"><img border="0" src="http://2.bp.blogspot.com/-DK968h5SnwM/UkkNlDk3BoI/AAAAAAAACsE/cgVr_i_0j5I/s400/Screenshot_2013-09-29-20-24-22.png" /></a><br /><br /><i>"Application not installed. An existing package by the same name with a conflicting signature is already installed."</i><br /><br /><a href="http://1.bp.blogspot.com/-KX2MkcjMwSQ/UkkNyBxN_GI/AAAAAAAACsM/XIPdQt5WBAg/s1600/Screenshot_2013-09-29-20-24-39.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/-KX2MkcjMwSQ/UkkNyBxN_GI/AAAAAAAACsM/XIPdQt5WBAg/s400/Screenshot_2013-09-29-20-24-39.png" /></a><br /><br />Similarly if you try to install the app on another development machine using ADB (or from the IDE) you get the following&nbsp;<i>"install parse failed inconsistent certificates" </i>error&nbsp;message:<br /><br /><pre><code>$ <b>adb install TestProj-debug-unaligned.apk </b><br />1539 KB/s (45347 bytes in 0.028s)<br /> pkg: /data/local/tmp/TestProj-debug-unaligned.apk<br />Failure [INSTALL_FAILED_ALREADY_EXISTS]<br />$ <b>adb install -r TestProj-debug-unaligned.apk </b><br />2659 KB/s (45347 bytes in 0.016s)<br /> pkg: /data/local/tmp/TestProj-debug-unaligned.apk<br />Failure [INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES]<br /></code></pre><pre><code><br /></code></pre>You also get the exact same message as above if you try to run the application from within <a href="http://developer.android.com/sdk/installing/studio.html">Android Studio</a> of course: <br /><pre><code><br />Waiting for device.<br />Target device: CB5A1QHGNF<br />Uploading file<br />  local path: /Users/lombard/src/TestProjProject/TestProj/build/apk/TestProj-debug-unaligned.apk<br />  remote path: /data/local/tmp/com.example.testproj<br />Installing com.example.testproj<br />DEVICE SHELL COMMAND: pm install -r "/data/local/tmp/com.example.testproj"<br />pkg: /data/local/tmp/com.example.testproj<br />Failure [INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES]<br /></code></pre><div><br /></div><div>You've got two options:<br /><ol><li>Copy the first machine's <code>debug.keystore</code> file to the second machine. See:&nbsp;<a href="http://stackoverflow.com/questions/3185444/how-to-deal-with-install-parse-failed-inconsistent-certificates-without-uninstal">How to deal with INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES without uninstallation</a>&nbsp;on StackOverflow.</li><li>Completely uninstall the application first and then install again. You may have to do this if you don't have the <code>debug.keystore</code> file for some reason. Perhaps your Jenkins CI build has a different release keystore.</li></ol></div><div>I've had to go for the second option.<br /><br />I was hoping I'd be able to keep the application's data, so I first tried uninstall with the -k option to keep the data files, however that results in an <i>"update incompatible"</i> error:</div><pre><code><br />$ adb shell pm uninstall -k com.example.testproj<br />$ adb install -r TestProj-debug-unaligned.apk<br />1532 KB/s (45347 bytes in 0.028s)<br /> pkg: /data/local/tmp/TestProj-debug-unaligned.apk<br />Failure [INSTALL_FAILED_UPDATE_INCOMPATIBLE]</code></pre><div><br /></div><div>The only solution seems to be to uninstall the application completely:<br /><br /><pre><code>$ adb uninstall com.example.testproj<br />Success</code></pre></div><div><br /></div><div>Now the app will install from Android Studio.</div><div><br /></div><div>Ideally I want to find a way to force an app to reinstall without needing to completely uninstall it first.</div>